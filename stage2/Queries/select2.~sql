/* 
This query retrieves detailed information about trips, including trip name, destination name, guard name, driver, number of passengers, and duration time. 
It filters trips based on specified destination names and a date range, and orders the results by trip name.
*/
SELECT /*+ LEADING(t d) USE_NL(d t) */
    t.name AS trip_name,
    d.name AS destination_name,
    g.name AS guard_name,
    tr.driver,
    tr.number_of_passengers,
    tr.duration_time
FROM
    trip t
    JOIN destinations d ON t.id_trip = d.id_trip
    JOIN guided_by gb ON t.id_trip = gb.id_trip
    JOIN guard g ON gb.id_guard = g.id_guard
    JOIN transportation tr ON t.id_transportation = tr.id_transportation
WHERE
    d.name IN (
        SELECT COLUMN_VALUE
        FROM TABLE(&destination_names)
    )
    AND t.trip_date BETWEEN &start_date AND &end_date
ORDER BY
    t.name;
